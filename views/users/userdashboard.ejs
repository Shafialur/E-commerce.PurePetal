<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <title>PurePetal</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/static/userasset/imgs/theme/purepetal.png">
    <!-- Template CSS -->
    <link rel="stylesheet" href="/static/userasset/css/main.css?v=3.4">
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->
</head>

<body>
    <header class="header-area header-style-5">
        <div class="header-top header-top-ptb-1 d-none d-lg-block">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-xl-3 col-lg-4">
                        <div class="header-info">
                            <ul>
                                <li><i class="fi-rs-smartphone"></i> <a href="#">(+91) 7736579803</a></li>
                                <li><i class="fi-rs-marker"></i><a href="page-contact.html">Our location</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-6 col-lg-4">
                        <div class="text-center">
                            <div id="news-flash" class="d-inline-block">
                                <ul>
                                    <li>Get great devices up to 50% off <a href="shop-grid-right.html">View details</a>
                                    </li>
                                    <li>Supper Value Deals - Save more with coupons</li>
                                    <li>Trendy 25silver jewelry, save up 35% off today <a
                                            href="shop-grid-right.html">Shop now</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-4">
                        <div class="header-info header-info-right">
                            <ul>
                                <li>
                                    <a class="language-dropdown-active" href="#"> <i class="fi-rs-world"></i> English <i
                                            class="fi-rs-angle-small-down"></i></a>
                                    <ul class="language-dropdown">
                                        <li><a href="#"><img src="/static/userasset/imgs/theme/flag-fr.png"
                                                    alt="">Français</a></li>
                                        <li><a href="#"><img src="/static/userasset/imgs/theme/flag-dt.png"
                                                    alt="">Deutsch</a></li>
                                        <li><a href="#"><img src="/static/userasset/imgs/theme/flag-ru.png"
                                                    alt="">Pусский</a></li>
                                    </ul>
                                </li>
                                <% if (isLoggedIn) { %>
                                    <!-- Show Logout button when the user is logged in -->
                                    <li class="dropdown nav-item">

                                        <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#"
                                            id="dropdownAccount" aria-expanded="false"><span>
                                                <%= userData.name %>
                                            </span></a>
                                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownAccount">
                                            <a class="dropdown-item" href="/editprofile?id=<%=userData.id %>"><i
                                                    class="material-icons md-perm_identity"></i>Edit Profile</a>
                                            <a class="dropdown-item" href="#"><i
                                                    class="material-icons md-settings"></i>Account Settings</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item text-danger" href="/logout"><i
                                                    class="material-icons md-exit_to_app"></i>Logout</a>
                                        </div>
                                    </li>
                                    <% } else { %>
                                        <!-- Show Log In / Sign Up button when the user is not logged in -->
                                        <li><i class="fi-rs-user"></i><a href="/login">Log In / Sign Up</a></li>
                                        <% } %>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-bottom sticky-bar sticky-white-bg">
            <div class="container">
                <div class="header-wrap header-space-between position-relative">
                    <div class="logo logo-width-1">
                        <a href="index.html"><img src="/static/userasset/imgs/theme/purepetal.png" alt="logo"></a>
                    </div>
                    <div
                        class="main-menu main-menu-grow main-menu-padding-1 main-menu-lh-1 main-menu-mrg-1 hm3-menu-padding d-none d-lg-block hover-boder">
                        <nav>
                            <ul>
                                <li><a class="active" href="/home">Home</a>
                                    <!-- <ul class="sub-menu">
                                        <li><a href="index.html">Home 1</a></li>
                                        <li><a href="index-2.html">Home 2</a></li>
                                        <li><a href="index-3.html">Home 3</a></li>
                                        <li><a href="index-4.html">Home 4</a></li>
                                    </ul> -->
                                </li>
                                <li><a href="/shoppage">Shop</a>

                                </li>
                                <li class="position-static"><a href="#">Mega <i class="fi-rs-angle-down"></i></a>
                                    <ul class="mega-menu">
                                        <li class="sub-mega-menu sub-mega-menu-width-22">
                                            <a class="menu-title" href="#">Women's Fashion</a>
                                            <ul>
                                                <li><a href="shop-product-right.html">Dresses</a></li>
                                                <li><a href="shop-product-right.html">Blouses & Shirts</a></li>
                                                <li><a href="shop-product-right.html">Hoodies & Sweatshirts</a></li>
                                                <li><a href="shop-product-right.html">Wedding Dresses</a></li>
                                                <li><a href="shop-product-right.html">Prom Dresses</a></li>
                                                <li><a href="shop-product-right.html">Cosplay Costumes</a></li>
                                            </ul>
                                        </li>
                                        <li class="sub-mega-menu sub-mega-menu-width-22">
                                            <a class="menu-title" href="#">Men's Fashion</a>
                                            <ul>
                                                <li><a href="shop-product-right.html">Jackets</a></li>
                                                <li><a href="shop-product-right.html">Casual Faux Leather</a></li>
                                                <li><a href="shop-product-right.html">Genuine Leather</a></li>
                                                <li><a href="shop-product-right.html">Casual Pants</a></li>
                                                <li><a href="shop-product-right.html">Sweatpants</a></li>
                                                <li><a href="shop-product-right.html">Harem Pants</a></li>
                                            </ul>
                                        </li>
                                        <li class="sub-mega-menu sub-mega-menu-width-22">
                                            <a class="menu-title" href="#">Technology</a>
                                            <ul>
                                                <li><a href="shop-product-right.html">Gaming Laptops</a></li>
                                                <li><a href="shop-product-right.html">Ultraslim Laptops</a></li>
                                                <li><a href="shop-product-right.html">Tablets</a></li>
                                                <li><a href="shop-product-right.html">Laptop Accessories</a></li>
                                                <li><a href="shop-product-right.html">Tablet Accessories</a></li>
                                            </ul>
                                        </li>
                                        <li class="sub-mega-menu sub-mega-menu-width-34">
                                            <div class="menu-banner-wrap">
                                                <a href="shop-product-right.html"><img
                                                        src="/static/userasset/imgs/banner/menu-banner.jpg"
                                                        alt="Evara"></a>
                                                <div class="menu-banner-content">
                                                    <h4>Hot deals</h4>
                                                    <h3>Don't miss<br> Trending</h3>
                                                    <div class="menu-banner-price">
                                                        <span class="new-price text-success">Save to 50%</span>
                                                    </div>
                                                    <div class="menu-banner-btn">
                                                        <a href="shop-product-right.html">Shop now</a>
                                                    </div>
                                                </div>
                                                <div class="menu-banner-discount">
                                                    <h3>
                                                        <span>35%</span>
                                                        off
                                                    </h3>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </li>
                                <!-- <li><a href="blog-category-grid.html">Blog <i class="fi-rs-angle-down"></i></a>
                                    <ul class="sub-menu">
                                        <li><a href="blog-category-grid.html">Blog Category Grid</a></li>
                                        <li><a href="blog-category-list.html">Blog Category List</a></li>
                                        <li><a href="blog-category-big.html">Blog Category Big</a></li>
                                        <li><a href="blog-category-fullwidth.html">Blog Category Wide</a></li>
                                        <li><a href="#">Single Post <i class="fi-rs-angle-right"></i></a>
                                            <ul class="level-menu level-menu-modify">
                                                <li><a href="blog-post-left.html">Left Sidebar</a></li>
                                                <li><a href="blog-post-right.html">Right Sidebar</a></li>
                                                <li><a href="blog-post-fullwidth.html">No Sidebar</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li> -->
                                <li><a href="#">Pages <i class="fi-rs-angle-down"></i></a>
                                    <ul class="sub-menu">
                                        <li><a href="page-about.html">About Us</a></li>
                                        <li><a href="page-contact.html">Contact</a></li>
                                        <li><a href="page-account.html">My Account</a></li>
                                        <li><a href="/login">login/register</a></li>
                                        <li><a href="page-purchase-guide.html">Purchase Guide</a></li>
                                        <li><a href="page-privacy-policy.html">Privacy Policy</a></li>
                                        <li><a href="page-terms.html">Terms of Service</a></li>
                                        <li><a href="page-404.html">404 Page</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="page-contact.html">Contact</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                    <div class="header-action-right">
                        <div class="header-action-2">
                            <div class="header-action-icon-2">
                                <a href="/wishlists">
                                    <img class="svgInject" alt="PurePetal"
                                        src="/static/userasset/imgs/theme/icons/icon-heart.svg">
                                    <!-- <span class="pro-count blue">4</span> -->
                                </a>
                            </div>
                            <div class="header-action-icon-2">
                                <a class="mini-cart-icon" href="/mycart">
                                    <img alt="Evara" src="/static/userasset/imgs/theme/icons/icon-cart.svg">

                                </a>

                            </div>

                            <div class="header-action-icon d-block d-lg-none">
                                <div class="burger-icon">
                                    <span class="burger-icon-top"></span>
                                    <span class="burger-icon-mid"></span>
                                    <span class="burger-icon-bottom"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="mobile-header-active mobile-header-wrapper-style">
        <div class="mobile-header-wrapper-inner">
            <div class="mobile-header-top">
                <div class="mobile-header-logo">
                    <a href="index.html"><img src="static/userasset/imgs/theme/logo.svg" alt="logo"></a>
                </div>
                <div class="mobile-menu-close close-style-wrap close-style-position-inherit">
                    <button class="close-style search-close">
                        <i class="icon-top"></i>
                        <i class="icon-bottom"></i>
                    </button>
                </div>
            </div>
            <div class="mobile-header-content-area">
                <div class="mobile-search search-style-3 mobile-header-border">
                    <form action="#">
                        <input type="text" placeholder="Search for items…">
                        <button type="submit"><i class="fi-rs-search"></i></button>
                    </form>
                </div>
                <div class="mobile-menu-wrap mobile-header-border">
                    <div class="main-categori-wrap mobile-header-border">
                        <a class="categori-button-active-2" href="#">
                            <span class="fi-rs-apps"></span> Browse Categories
                        </a>
                        <div class="categori-dropdown-wrap categori-dropdown-active-small">
                            <ul>
                                <li><a href="shop-grid-right.html"><i class="evara-font-dress"></i>Women's Clothing</a>
                                </li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-tshirt"></i>Men's Clothing</a>
                                </li>
                                <li> <a href="shop-grid-right.html"><i class="evara-font-smartphone"></i> Cellphones</a>
                                </li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-desktop"></i>Computer &
                                        Office</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-cpu"></i>Consumer
                                        Electronics</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-home"></i>Home & Garden</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-high-heels"></i>Shoes</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-teddy-bear"></i>Mother &
                                        Kids</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-kite"></i>Outdoor fun</a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- mobile menu start -->
                    <nav>
                        <ul class="mobile-menu">
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                    href="index.html">Home</a>
                                <ul class="dropdown">
                                    <li><a href="index.html">Home 1</a></li>
                                    <li><a href="index-2.html">Home 2</a></li>
                                    <li><a href="index-3.html">Home 3</a></li>
                                    <li><a href="index-4.html">Home 4</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                    href="shop-grid-right.html">shop</a>
                                <ul class="dropdown">
                                    <li><a href="shop-grid-right.html">Shop Grid – Right Sidebar</a></li>
                                    <li><a href="shop-grid-left.html">Shop Grid – Left Sidebar</a></li>
                                    <li><a href="shop-list-right.html">Shop List – Right Sidebar</a></li>
                                    <li><a href="shop-list-left.html">Shop List – Left Sidebar</a></li>
                                    <li><a href="shop-fullwidth.html">Shop - Wide</a></li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                            href="#">Single Product</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Product – Right Sidebar</a></li>
                                            <li><a href="shop-product-left.html">Product – Left Sidebar</a></li>
                                            <li><a href="shop-product-full.html">Product – No sidebar</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="shop-filter.html">Shop – Filter</a></li>
                                    <li><a href="shop-wishlist.html">Shop – Wishlist</a></li>
                                    <li><a href="shop-cart.html">Shop – Cart</a></li>
                                    <li><a href="shop-checkout.html">Shop – Checkout</a></li>
                                    <li><a href="shop-compare.html">Shop – Compare</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Mega
                                    menu</a>
                                <ul class="dropdown">
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                            href="#">Women's Fashion</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Dresses</a></li>
                                            <li><a href="shop-product-right.html">Blouses & Shirts</a></li>
                                            <li><a href="shop-product-right.html">Hoodies & Sweatshirts</a></li>
                                            <li><a href="shop-product-right.html">Women's Sets</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                            href="#">Men's Fashion</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Jackets</a></li>
                                            <li><a href="shop-product-right.html">Casual Faux Leather</a></li>
                                            <li><a href="shop-product-right.html">Genuine Leather</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                            href="#">Technology</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Gaming Laptops</a></li>
                                            <li><a href="shop-product-right.html">Ultraslim Laptops</a></li>
                                            <li><a href="shop-product-right.html">Tablets</a></li>
                                            <li><a href="shop-product-right.html">Laptop Accessories</a></li>
                                            <li><a href="shop-product-right.html">Tablet Accessories</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                    href="blog-category-fullwidth.html">Blog</a>
                                <ul class="dropdown">
                                    <li><a href="blog-category-grid.html">Blog Category Grid</a></li>
                                    <li><a href="blog-category-list.html">Blog Category List</a></li>
                                    <li><a href="blog-category-big.html">Blog Category Big</a></li>
                                    <li><a href="blog-category-fullwidth.html">Blog Category Wide</a></li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                            href="#">Single Product Layout</a>
                                        <ul class="dropdown">
                                            <li><a href="blog-post-left.html">Left Sidebar</a></li>
                                            <li><a href="blog-post-right.html">Right Sidebar</a></li>
                                            <li><a href="blog-post-fullwidth.html">No Sidebar</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Pages</a>
                                <ul class="dropdown">
                                    <li><a href="page-about.html">About Us</a></li>
                                    <li><a href="page-contact.html">Contact</a></li>
                                    <li><a href="page-account.html">My Account</a></li>
                                    <li><a href="page-login-register.html">login/register</a></li>
                                    <li><a href="page-purchase-guide.html">Purchase Guide</a></li>
                                    <li><a href="page-privacy-policy.html">Privacy Policy</a></li>
                                    <li><a href="page-terms.html">Terms of Service</a></li>
                                    <li><a href="page-404.html">404 Page</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Language</a>
                                <ul class="dropdown">
                                    <li><a href="#">English</a></li>
                                    <li><a href="#">French</a></li>
                                    <li><a href="#">German</a></li>
                                    <li><a href="#">Spanish</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <!-- mobile menu end -->
                </div>
                <div class="mobile-header-info-wrap mobile-header-border">
                    <div class="single-mobile-header-info mt-30">
                        <a href="page-contact.html"> Our location </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="page-login-register.html">Log In / Sign Up </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="#">(+01) - 2345 - 6789 </a>
                    </div>
                </div>
                <div class="mobile-social-icon">
                    <h5 class="mb-15 text-grey-4">Follow Us</h5>
                    <a href="#"><img src="static/userasset/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                    <a href="#"><img src="static/userasset/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                    <a href="#"><img src="static/userasset/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                    <a href="#"><img src="static/userasset/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                    <a href="#"><img src="static/userasset/imgs/theme/icons/icon-youtube.svg" alt=""></a>
                </div>
            </div>
        </div>
    </div>
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    Home
                    <span></span> User
                    <span></span> Account
                </div>
            </div>
        </div>
        <section class="pt-150 pb-150">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 m-auto">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="dashboard-menu">
                                    <ul class="nav flex-column" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="dashboard-tab" data-bs-toggle="tab"
                                                href="#dashboard" role="tab" aria-controls="dashboard"
                                                aria-selected="false"><i
                                                    class="fi-rs-settings-sliders mr-10"></i>Dashboard</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="orders-tab" data-bs-toggle="tab" href="#orders"
                                                role="tab" aria-controls="orders" aria-selected="false"><i
                                                    class="fi-rs-shopping-bag mr-10"></i>Orders</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="track-orders-tab" data-bs-toggle="tab"
                                                href="#track-orders" role="tab" aria-controls="track-orders"
                                                aria-selected="false"><i
                                                    class="fi-rs-shopping-cart-check mr-10"></i>Track Your Order</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="address-tab" data-bs-toggle="tab" href="#address"
                                                role="tab" aria-controls="address" aria-selected="true"><i
                                                    class="fi-rs-marker mr-10"></i>My Address</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="account-detail-tab" data-bs-toggle="tab"
                                                href="#account-detail" role="tab" aria-controls="account-detail"
                                                aria-selected="true"><i class="fi-rs-user mr-10"></i>Security</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="/logout"><i
                                                    class="fi-rs-sign-out mr-10"></i>Logout</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="tab-content dashboard-content">
                                    <div class="tab-pane fade active show" id="dashboard" role="tabpanel"
                                        aria-labelledby="dashboard-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Hello <%= userData.name %> !</h5>
                                            </div>
                                            <div class="card-body">

                                                <div class="text-center">
                                                    <img src="/productimages/profilecomputer.webp" alt="" width="100px"
                                                        height="100">
                                                    <p><strong>Name:</strong>
                                                        <%= userData.name %>
                                                    </p>
                                                    <p><strong>Email:</strong>
                                                        <%= userData.email %>
                                                    </p>
                                                    <p><strong>Phone
                                                            Number:</strong>
                                                        <%= userData.mobile %>
                                                    </p>

                                                    <!-- Edit button -->
                                                    <button type="button" class="btn btn-sm btn-secondary"
                                                        onclick="editUserInfo()">Edit</button>
                                                </div>

                                                <!-- Edit form (hidden by default) -->
                                                <form id="editForm" class="text-center" style="display: none;">
                                                    <p>Edit user details:</p>
                                                    <input type="text" id="editName" value="<%= userData.name %>"
                                                        required>
                                                    <input type="email" id="editEmail" value="<%= userData.email %>"
                                                        required>
                                                    <input type="tel" id="editMobile" value="<%= userData.mobile %>"
                                                        required pattern="[0-9]{10}">

                                                    <button type="button" class="btn btn-sm btn-primary"
                                                        onclick="validateAndSave()">Save</button>
                                                </form>
                                            </div>
                                        </div>

                                        <script>
                                            // Function to show the edit form and hide the user details
                                            function editUserInfo() {
                                                document.getElementById("editForm").style.display = "block";
                                                document.querySelector('.text-center').style.display = "none";
                                            }
                                            function validateAndSave() {
                                                // Get form inputs
                                                var name = document.getElementById("editName").value.trim();
                                                var email = document.getElementById("editEmail").value.trim();
                                                var mobile = document.getElementById("editMobile").value.trim();

                                                // Basic validation
                                                if (name === "" || email === "" || mobile === "") {
                                                    alert("Please fill in all fields.");
                                                    return;
                                                }
                                                var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                                                if (!emailPattern.test(email)) {
                                                    alert("Please enter a valid email address.");
                                                    return;
                                                }

                                                // Custom validation for phone number (optional)
                                                if (!/^\d{10}$/.test(mobile)) {
                                                    alert("Please enter a valid 10-digit phone number.");
                                                    return;
                                                }
                                                saveUserInfo();
                                            }


                                            // Function to save edited user details
                                            function saveUserInfo() {
                                                var newName = document.getElementById("editName").value;
                                                var newEmail = document.getElementById("editEmail").value;
                                                var newMobile = document.getElementById("editMobile").value;

                                                // Send a request to update user details (e.g., using fetch or AJAX)
                                                // Data to be sent in the request body
                                                var userData = {
                                                    name: newName,
                                                    email: newEmail,
                                                    mobile: newMobile
                                                };

                                                // Example: Fetch POST request to update user details
                                                fetch('/updateUserDetails', {
                                                    method: 'POST',
                                                    headers: {
                                                        'Content-Type': 'application/json'
                                                    },
                                                    body: JSON.stringify(userData)
                                                })
                                                    .then(response => {
                                                        if (response.ok) {
                                                            console.log('User details updated successfully');
                                                            window.location.reload()
                                                        } else {
                                                            console.error('Failed to update user details');
                                                        }
                                                    })
                                                    .catch(error => {
                                                        console.error('Error updating user details:', error);
                                                    });
                                            }
                                        </script>

                                    </div>
                                    <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="orders-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Your Orders</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table table-striped">
                                                        <thead>
                                                            <tr>
                                                                <th>Order ID</th>
                                                                <th>Date</th>
                                                                <th>Status</th>
                                                                <th>Total</th>
                                                                <th>Actions</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <% for (var i=0; i < orderData.length; i++) { %>
                                                                <tr>
                                                                    <td>
                                                                        <%= orderData[i].orderId %>
                                                                    </td>
                                                                    <td>
                                                                        <%= new
                                                                            Date(orderData[i].date).toLocaleDateString()
                                                                            %>
                                                                    </td>
                                                                    <td>
                                                                        <%= orderData[i].orderstatus %>
                                                                    </td>
                                                                    <td>Rs: <%= orderData[i].total %>
                                                                    </td>
                                                                    <td>
                                                                        <div class="dropdown">
                                                                            <button
                                                                                class="btn btn-secondary dropdown-toggle"
                                                                                type="button"
                                                                                id="dropdownMenuButton<%= i %>"
                                                                                data-bs-toggle="dropdown"
                                                                                aria-expanded="false">
                                                                                View
                                                                            </button>
                                                                            <ul class="dropdown-menu"
                                                                                aria-labelledby="dropdownMenuButton<%= i %>">
                                                                                <li><a class="dropdown-item"
                                                                                        href="/orderdetails?id=<%= orderData[i].orderId %>">Detailed
                                                                                        View</a></li>
                                                                                <% if
                                                                                    (orderData[i].orderstatus==="Delivered"
                                                                                    ) { %>
                                                                                    <li><a class="dropdown-item"
                                                                                            href="#"
                                                                                            onclick="returnOrder('<%= orderData[i].orderId %>')">Return
                                                                                            Order</a></li>
                                                                                    <li><a class="dropdown-item"
                                                                                            href="#"
                                                                                            onclick="alert('Admin can only delete orders')">Delete</a>
                                                                                    </li>
                                                                                    <% } else if
                                                                                        (orderData[i].orderstatus==="Cancelled"
                                                                                        ) { %>
                                                                                        <li><a class="dropdown-item"
                                                                                                href="#"
                                                                                                onclick="alert('Admin can only delete orders')">Delete</a>
                                                                                        </li>
                                                                                        <% }else if
                                                                                            (orderData[i].orderstatus==="Return"
                                                                                            ) { %>
                                                                                            <li><a class="dropdown-item"
                                                                                                    href="#"
                                                                                                    onclick="cancelreturn('<%= orderData[i].orderId %>')">Cancel
                                                                                                    Return</a></li>
                                                                                            <% } else { %>
                                                                                                <li><a class="dropdown-item"
                                                                                                        href="#"
                                                                                                        onclick="cancelOrder('<%= orderData[i].orderId %>')">Cancel
                                                                                                        Order</a></li>
                                                                                                <% } %>
                                                                            </ul>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <% } %>
                                                        </tbody>
                                                    </table>



                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="track-orders" role="tabpanel"
                                        aria-labelledby="track-orders-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Orders tracking</h5>
                                            </div>
                                            <div class="card-body contact-from-area">
                                                <p>To track your order please enter your OrderID in the box below and
                                                    press "Track" button. This was given to you on your receipt and in
                                                    the confirmation email you should have received.</p>
                                                <div class="row">
                                                    <div class="col-lg-8">
                                                        <form class="contact-form-style mt-30 mb-50" action="#"
                                                            method="post">
                                                            <div class="input-style mb-20">
                                                                <label>Order ID</label>
                                                                <input name="order-id"
                                                                    placeholder="Found in your order confirmation email"
                                                                    type="text" class="square">
                                                            </div>
                                                            <div class="input-style mb-20">
                                                                <label>Billing email</label>
                                                                <input name="billing-email"
                                                                    placeholder="Email you used during checkout"
                                                                    type="email" class="square">
                                                            </div>
                                                            <button class="submit submit-auto-width"
                                                                type="submit">Track</button>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="address" role="tabpanel"
                                        aria-labelledby="address-tab">
                                        <div class="row">

                                            <% if (addressData !=null) { %>
                                                <% for (let i=0; i < addressData.address.length; i++) { %>


                                                    <div class="col-lg-6">
                                                        <div class="card mb-3 mb-lg-0">
                                                            <div class="card-header">
                                                                <h5 class="mb-0">My Address <%= i+1%>
                                                                </h5>
                                                            </div>
                                                            <div class="card-body">
                                                                <address>
                                                                    <%= addressData.address[i].house %><br>
                                                                        <%= addressData.address[i].landmark %><br>
                                                                            <%= addressData.address[i].city %>
                                                                                <br>
                                                                                <%= addressData.address[i].state%> <br>
                                                                                    <%= addressData.address[i].zipcode
                                                                                        %> <br>
                                                                                        <p>
                                                                                            <%= addressData.address[i].country
                                                                                                %>
                                                                                        </p>
                                                                </address>

                                                            </div>
                                                            <div class="card-footer">
                                                                <a href="/editaddress/?id=<%= i %>"
                                                                    class="btn btn-sm btn-secondary">Edit</a>

                                                                <button type="button"
                                                                    onclick="deleteAddress('<%= addressData.address[i]._id %>')"
                                                                    class="btn btn-sm btn-danger">Delete</button>

                                                            </div>
                                                        </div><br>

                                                    </div>
                                                    <% } %>
                                                        <a href="/addnewaddress" class="btn btn-secondary btn-small">Add
                                                            New Address</a>
                                                        <% } else { %>
                                                            <a href="/addaddress"
                                                                class="btn btn-secondary btn-small">Add Address</a>
                                                            <% } %>
                                        </div>

                                    </div>
                                    <div class="tab-pane fade" id="account-detail" role="tabpanel"
                                        aria-labelledby="account-detail-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5>Change Password</h5>
                                            </div>
                                            <div class="card-body">
                                                <form method="post" name="changepassword">
                                                    <div class="row">
                                                        <% if (typeof message3 !=='undefined' ) { %>
                                                            <p class="text-success text-left">
                                                                <%= message3 %>
                                                            </p>
                                                            <% } %>
                                                                <div class="form-group col-md-12">
                                                                    <label>Current Password <span
                                                                            class="required">*</span></label>
                                                                    <input required="" class="form-control square"
                                                                        name="password" id="currentPassword"
                                                                        type="password">
                                                                    <% if (typeof message !=='undefined' ) { %>
                                                                        <p class="text-danger text-left">
                                                                            <%= message %>
                                                                        </p>
                                                                        <% } %>
                                                                </div>

                                                                <div class="form-group col-md-12">
                                                                    <label>New Password <span
                                                                            class="required">*</span></label>
                                                                    <input required="" class="form-control square"
                                                                        name="npassword" id="newPassword"
                                                                        type="password">
                                                                </div>
                                                                <div class="form-group col-md-12">
                                                                    <label>Confirm Password <span
                                                                            class="required">*</span></label>
                                                                    <input required="" class="form-control square"
                                                                        name="cpassword" id="confirmPassword"
                                                                        type="password" oninput="validateForm()">
                                                                </div>
                                                                <style>
                                                                    .verysmall {
                                                                        font-size: small;
                                                                    }
                                                                </style>
                                                                <div id="passwordRules" class="col-md-12">

                                                                    <p class="verysmall text-danger" id="message"></p>

                                                                </div>
                                                                <br>
                                                                <div class="col-md-12">
                                                                    <button type="submit" id="submitBtn"
                                                                        class="btn btn-fill-out submit"
                                                                        name="submit">Update</button>
                                                                </div>
                                                    </div>
                                                </form>
                                                <script>
                                                    function validateForm() {
                                                        let password = document.getElementById("newPassword").value;
                                                        let confirmPassword = document.getElementById("confirmPassword").value;
                                                        let messageElement = document.getElementById("message");
                                                        let submitBtn = document.getElementById("submitBtn");

                                                        let strongRegex = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");

                                                        if (password !== confirmPassword) {
                                                            messageElement.innerHTML = "Passwords do not match";
                                                            messageElement.style.color = "red";
                                                            submitBtn.disabled = true;
                                                        } else if (!strongRegex.test(password)) {
                                                            messageElement.innerHTML = "Password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one number, and one special character.";
                                                            messageElement.style.color = "red";
                                                            submitBtn.disabled = true;
                                                        } else {
                                                            messageElement.innerHTML = "";
                                                            submitBtn.disabled = false;
                                                        }

                                                    }

                                                </script>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer class="main">
        <section class="newsletter p-30 text-white wow fadeIn animated">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-7 mb-md-3 mb-lg-0">
                        <div class="row align-items-center">
                            <div class="col flex-horizontal-center">
                                <img class="icon-email" src="static/userasset/imgs/theme/icons/icon-email.svg" alt="">
                                <h4 class="font-size-20 mb-0 ml-3">Sign up to Newsletter</h4>
                            </div>
                            <div class="col my-4 my-md-0 des">
                                <h5 class="font-size-15 ml-4 mb-0">...and receive <strong>$25 coupon for first
                                        shopping.</strong></h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <!-- Subscribe Form -->
                        <form class="form-subcriber d-flex wow fadeIn animated">
                            <input type="email" class="form-control bg-white font-small" placeholder="Enter your email">
                            <button class="btn bg-dark text-white" type="submit">Subscribe</button>
                        </form>
                        <!-- End Subscribe Form -->
                    </div>
                </div>
            </div>
        </section>
        <section class="section-padding footer-mid">
            <div class="container pt-15 pb-20">
                <div class="row">
                    <div class="col-lg-4 col-md-6">
                        <div class="widget-about font-md mb-md-5 mb-lg-0">
                            <div class="logo logo-width-1 wow fadeIn animated">
                                <a href="index.html"><img src="static/userasset/imgs/theme/logo.svg" alt="logo"></a>
                            </div>
                            <h5 class="mt-20 mb-10 fw-600 text-grey-4 wow fadeIn animated">Contact</h5>
                            <p class="wow fadeIn animated">
                                <strong>Address: </strong>562 Wellington Road, Street 32, San Francisco
                            </p>
                            <p class="wow fadeIn animated">
                                <strong>Phone: </strong>+01 2222 365 /(+91) 01 2345 6789
                            </p>
                            <p class="wow fadeIn animated">
                                <strong>Hours: </strong>10:00 - 18:00, Mon - Sat
                            </p>
                            <h5 class="mb-10 mt-30 fw-600 text-grey-4 wow fadeIn animated">Follow Us</h5>
                            <div class="mobile-social-icon wow fadeIn animated mb-sm-5 mb-md-0">
                                <a href="#"><img src="static/userasset/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                                <a href="#"><img src="static/userasset/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                                <a href="#"><img src="static/userasset/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                                <a href="#"><img src="static/userasset/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                                <a href="#"><img src="static/userasset/imgs/theme/icons/icon-youtube.svg" alt=""></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-3">
                        <h5 class="widget-title wow fadeIn animated">About</h5>
                        <ul class="footer-list wow fadeIn animated mb-sm-5 mb-md-0">
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Delivery Information</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Terms &amp; Conditions</a></li>
                            <li><a href="#">Contact Us</a></li>
                            <li><a href="#">Support Center</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2  col-md-3">
                        <h5 class="widget-title wow fadeIn animated">My Account</h5>
                        <ul class="footer-list wow fadeIn animated">
                            <li><a href="#">Sign In</a></li>
                            <li><a href="#">View Cart</a></li>
                            <li><a href="#">My Wishlist</a></li>
                            <li><a href="#">Track My Order</a></li>
                            <li><a href="#">Help</a></li>
                            <li><a href="#">Order</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-4">
                        <h5 class="widget-title wow fadeIn animated">Install App</h5>
                        <div class="row">
                            <div class="col-md-8 col-lg-12">
                                <p class="wow fadeIn animated">From App Store or Google Play</p>
                                <div class="download-app wow fadeIn animated">
                                    <a href="#" class="hover-up mb-sm-4 mb-lg-0"><img class="active"
                                            src="static/userasset/imgs/theme/app-store.jpg" alt=""></a>
                                    <a href="#" class="hover-up"><img src="static/userasset/imgs/theme/google-play.jpg"
                                            alt=""></a>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-12 mt-md-3 mt-lg-0">
                                <p class="mb-20 wow fadeIn animated">Secured Payment Gateways</p>
                                <img class="wow fadeIn animated" src="static/userasset/imgs/theme/payment-method.png"
                                    alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="container pb-20 wow fadeIn animated">
            <div class="row">
                <div class="col-12 mb-20">
                    <div class="footer-bottom"></div>
                </div>
                <div class="col-lg-6">
                    <p class="float-md-left font-sm text-muted mb-0">&copy; 2022, <strong
                            class="text-brand">Evara</strong> - HTML Ecommerce Template </p>
                </div>
                <div class="col-lg-6">
                    <p class="text-lg-end text-start font-sm text-muted mb-0">
                        Designed by <a href="http://alithemes.com" target="_blank">Alithemes.com</a>. All rights
                        reserved
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="text-center">
                    <h5 class="mb-5">Now Loading</h5>
                    <div class="loader">
                        <div class="bar bar1"></div>
                        <div class="bar bar2"></div>
                        <div class="bar bar3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        function cancelreturn(orderId) {
            let newStatus = "Delivered";
            Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: 'Yes, cancel it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    fetch('/admin/updateOrderStatus', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ newStatus: newStatus, orderId: orderId })
                    })
                        .then(response => {
                            if (response.ok) {
                                Swal.fire({
                                    title: 'Cancelled returning!',
                                    text: 'Your return has been cancelled.',
                                    icon: "success"
                                });
                                setTimeout(() => {
                                    location.reload();
                                }, 2000);
                            } else {
                                Swal.fire({
                                    title: "Error!",
                                    text: "Something went wrong.",
                                    icon: "error"
                                });
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            Swal.fire({
                                title: "Error!",
                                text: "Something went wrong.",
                                icon: "error"
                            });
                        });
                }
            });
        }

        function cancelOrder(orderId) {
            Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: 'Yes, cancel it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    fetch(`/cancelorder/${orderId}`, { method: "GET" })
                        .then(response => {
                            if (response.ok) {
                                Swal.fire({
                                    title: 'Cancelled!',
                                    text: 'Your order has been cancelled.',
                                    icon: "success"
                                });
                                setTimeout(() => {
                                    location.reload()
                                }, 2000);
                            } else {
                                Swal.fire({
                                    title: "Error!",
                                    text: "Somthing Went Wrong.",
                                    icon: "error"
                                });
                            }
                        })

                }
            });
        }

        function returnOrder(orderId) {
            Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: 'Yes, return it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    fetch(`/returnorder/${orderId}`, { method: "GET" })
                        .then(response => {
                            if (response.ok) {
                                Swal.fire({
                                    title: 'Return!',
                                    text: 'Your order has been returning.',
                                    icon: "success"
                                });
                                setTimeout(() => {
                                    location.reload()
                                }, 2000);
                            } else {
                                Swal.fire({
                                    title: "Error!",
                                    text: "Somthing Went Wrong.",
                                    icon: "error"
                                });
                            }
                        })

                }
            });
        }
    </script>


    <script>
        function deleteAddress(addressId) {
            console.log(addressId);
            Swal.fire({
                title: "Are you sure?",
                text: `You want to Delete Address!`,
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: `Yes, delete it!`
            }).then((result) => {
                if (result.isConfirmed) {
                    fetch(`/deleteaddress/${addressId}`, { method: "GET" })
                        .then(response => {
                            if (response.ok) {
                                Swal.fire({
                                    title: `delete`,
                                    text: `user were deleted`,
                                    icon: "success"
                                });
                                setTimeout(() => {
                                    location.reload()
                                }, 2000);
                            } else {
                                Swal.fire({
                                    title: "Error!",
                                    text: "Somthing Went Wrong.",
                                    icon: "error"
                                });
                            }
                        })

                }
            });
        }
    </script>
    // ..............................................................
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Get the active tab from localStorage or use the default (dashboard)
            const activeTab = localStorage.getItem('activeTab') || 'dashboard';

            // Set the active tab
            const tabs = document.querySelectorAll('.nav-link');
            tabs.forEach(tab => {
                if (tab.getAttribute('href').substring(1) === activeTab) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });

            // Show the corresponding tab content
            const tabContent = document.querySelectorAll('.tab-pane');
            tabContent.forEach(tab => {
                if (tab.getAttribute('id') === activeTab) {
                    tab.classList.add('active', 'show');
                } else {
                    tab.classList.remove('active', 'show');
                }
            });

            // Add event listeners to update active tab on tab click
            tabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    const tabId = tab.getAttribute('href').substring(1);
                    localStorage.setItem('activeTab', tabId);
                });
            });
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script src="static/userasset/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="static/userasset/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="static/userasset/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="static/userasset/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="static/userasset/js/plugins/slick.js"></script>
    <script src="static/userasset/js/plugins/jquery.syotimer.min.js"></script>
    <script src="static/userasset/js/plugins/wow.js"></script>
    <script src="static/userasset/js/plugins/jquery-ui.js"></script>
    <script src="static/userasset/js/plugins/perfect-scrollbar.js"></script>
    <script src="static/userasset/js/plugins/magnific-popup.js"></script>
    <script src="static/userasset/js/plugins/select2.min.js"></script>
    <script src="static/userasset/js/plugins/waypoints.js"></script>
    <script src="static/userasset/js/plugins/counterup.js"></script>
    <script src="static/userasset/js/plugins/jquery.countdown.min.js"></script>
    <script src="static/userasset/js/plugins/images-loaded.js"></script>
    <script src="static/userasset/js/plugins/isotope.js"></script>
    <script src="static/userasset/js/plugins/scrollup.js"></script>
    <script src="static/userasset/js/plugins/jquery.vticker-min.js"></script>
    <script src="static/userasset/js/plugins/jquery.theia.sticky.js"></script>
    <!-- Template  JS -->
    <script src="static/userasset/js/main.js?v=3.4"></script>
</body>

</html>